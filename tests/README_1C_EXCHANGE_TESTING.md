# üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API 1C Exchange

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ `/api/1c_exchange`, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∑–∞–∫–∞–∑–æ–≤ —Å —Å–∏—Å—Ç–µ–º–æ–π 1–°.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

```
tests/
‚îú‚îÄ‚îÄ integration/test_1c_exchange_api.rb     # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å —Ä–µ–∞–ª—å–Ω–æ–π –ë–î
‚îú‚îÄ‚îÄ unit/test_1c_exchange_unit.rb          # Unit —Ç–µ—Å—Ç—ã –ª–æ–≥–∏–∫–∏ XML –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ utils/test_1c_exchange_mock.rb         # Mock —Ç–µ—Å—Ç—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
‚îî‚îÄ‚îÄ README_1C_EXCHANGE_TESTING.md          # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫

### Unit —Ç–µ—Å—Ç—ã (–±–µ–∑ –ë–î)
```bash
# –ë–∞–∑–æ–≤—ã–µ unit —Ç–µ—Å—Ç—ã
ruby tests/unit/test_1c_exchange_unit.rb

# Mock —Ç–µ—Å—Ç—ã —Å HTTP —Å–∏–º—É–ª—è—Ü–∏–µ–π
ruby tests/utils/test_1c_exchange_mock.rb
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Å –ë–î)
```bash
# –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ë–î –∏ –ø–æ–ª–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
ruby tests/integration/test_1c_exchange_api.rb
```

## üîç –ß—Ç–æ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–µ–∂–∏–º—ã API

| –†–µ–∂–∏–º | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è |
|-------|-----------|-------------|
| `checkauth` | –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ | HTTP 200, —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ 'success' |
| `init` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ–±–º–µ–Ω–∞ | HTTP 200, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∞–π–ª–æ–≤–æ–≥–æ –ª–∏–º–∏—Ç–∞ |
| `query` | –í—ã–≥—Ä—É–∑–∫–∞ –∑–∞–∫–∞–∑–æ–≤ | XML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –∫–æ–¥–∏—Ä–æ–≤–∫–∞ UTF-8, CommerceML 2.03 |
| `success` | –ü–æ–º–µ—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤ | HTTP 200, –∏–∑–º–µ–Ω–µ–Ω–∏–µ erp_status –≤ –ë–î |

### XML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Ä–µ–∂–∏–º query)

‚úÖ **–ö–æ—Ä–Ω–µ–≤–æ–π —ç–ª–µ–º–µ–Ω—Ç**: `–ö–æ–º–º–µ—Ä—á–µ—Å–∫–∞—è–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ namespace  
‚úÖ **–î–æ–∫—É–º–µ–Ω—Ç—ã**: –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–∫–∞–∑–æ–≤ —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏  
‚úÖ **–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã**: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑—á–∏–∫–∞—Ö –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è—Ö  
‚úÖ **–ê–¥—Ä–µ—Å–∞**: –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∞–¥—Ä–µ—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏  
‚úÖ **–¢–æ–≤–∞—Ä—ã**: –¢–æ–≤–∞—Ä—ã –∑–∞–∫–∞–∑–∞ + —Ç–æ–≤–∞—Ä –¥–æ—Å—Ç–∞–≤–∫–∏  
‚úÖ **–ö–æ–¥–∏—Ä–æ–≤–∫–∞**: UTF-8 —Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∫–∏—Ä–∏–ª–ª–∏—Ü—ã  

### –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

‚úÖ **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤**: –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø–æ ENV['TESTER_NAME']  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –∞–¥—Ä–µ—Å–æ–≤**: del_address vs district_text –ª–æ–≥–∏–∫–∞  
‚úÖ **–î–∞—Ç—ã –¥–æ—Å—Ç–∞–≤–∫–∏**: d2_date fallback –Ω–∞ d1_date  
‚úÖ **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π**: nil –∏ empty string  
‚úÖ **–°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã**: HTML entities –∏ –∫–∏—Ä–∏–ª–ª–∏—Ü–∞  

## üìä –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

### 1. Unit —Ç–µ—Å—Ç—ã (`test_1c_exchange_unit.rb`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ XML –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
**–°–∫–æ—Ä–æ—Å—Ç—å**: –û—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–µ (< 1 —Å–µ–∫)  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: –¢–æ–ª—å–∫–æ Minitest, Nokogiri  

**–ü–æ–∫—Ä—ã–≤–∞–µ—Ç**:
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ XML –∏ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –õ–æ–≥–∏–∫–∞ –∞–¥—Ä–µ—Å–æ–≤ –∏ –¥–∞—Ç
- ‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ –∫–æ–¥–∏—Ä–æ–≤–∫–∞
- ‚úÖ –ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏ (nil, empty)
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (100+ –∑–∞–∫–∞–∑–æ–≤)

**–ó–∞–ø—É—Å–∫**:
```bash
ruby tests/unit/test_1c_exchange_unit.rb
```

### 2. Integration —Ç–µ—Å—Ç—ã (`test_1c_exchange_api.rb`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Ä–µ–∞–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∏ –ë–î  
**–°–∫–æ—Ä–æ—Å—Ç—å**: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –ë–î)  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: ActiveRecord, MySQL, –ø–æ–ª–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ  

**–ü–æ–∫—Ä—ã–≤–∞–µ—Ç**:
- ‚úÖ –†–µ–∞–ª—å–Ω—ã–µ HTTP –∑–∞–ø—Ä–æ—Å—ã –∫–æ –≤—Å–µ–º —Ä–µ–∂–∏–º–∞–º
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –∑–∞–∫–∞–∑–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ TESTER_NAME
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –æ—á–∏—Å—Ç–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ó–∞–ø—É—Å–∫**:
```bash
# –¢—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è TEST_BASE_URL
export TEST_BASE_URL="http://localhost:4567"
ruby tests/integration/test_1c_exchange_api.rb
```

### 3. Mock —Ç–µ—Å—Ç—ã (`test_1c_exchange_mock.rb`)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ë—ã—Å—Ç—Ä–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è  
**–°–∫–æ—Ä–æ—Å—Ç—å**: –ë—ã—Å—Ç—Ä—ã–µ (< 2 —Å–µ–∫)  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: WebMock –¥–ª—è HTTP –º–æ–∫–∏—Ä–æ–≤–∞–Ω–∏—è  

**–ü–æ–∫—Ä—ã–≤–∞–µ—Ç**:
- ‚úÖ HTTP –æ—Ç–≤–µ—Ç—ã —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ä–≤–µ—Ä–∞
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã —Å–µ—Ç–∏
- ‚úÖ –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π XML
- ‚úÖ –ü—Ä–æ–±–ª–µ–º—ã –∫–æ–¥–∏—Ä–æ–≤–∫–∏

**–ó–∞–ø—É—Å–∫**:
```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç webmock –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
ruby tests/utils/test_1c_exchange_mock.rb
```

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```bash
# –î–ª—è integration —Ç–µ—Å—Ç–æ–≤
export TEST_BASE_URL="http://localhost:4567"  # URL —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
export TESTER_NAME="Test User"               # –ò–º—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–∫–∞–∑–æ–≤

# –î–ª—è production —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
export TEST_BASE_URL="https://rozarioflowers.ru"
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
# –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
gem install minitest nokogiri json

# –î–ª—è mock —Ç–µ—Å—Ç–æ–≤
gem install webmock

# –î–ª—è integration —Ç–µ—Å—Ç–æ–≤ (—á–µ—Ä–µ–∑ bundle)
bundle install
```

## üìã –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –Ω–æ–≤—ã—Ö —Ñ–∏—á
```bash
# 1. –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏
ruby tests/unit/test_1c_exchange_unit.rb

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ HTTP –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
ruby tests/utils/test_1c_exchange_mock.rb

# 3. –ü–æ–ª–Ω–æ–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
ruby tests/integration/test_1c_exchange_api.rb
```

### CI/CD –ø–∞–π–ø–ª–∞–π–Ω
```bash
# Stage 1: Unit —Ç–µ—Å—Ç—ã (–≤—Å–µ–≥–¥–∞)
ruby tests/unit/test_1c_exchange_unit.rb

# Stage 2: Mock —Ç–µ—Å—Ç—ã (–≤—Å–µ–≥–¥–∞) 
ruby tests/utils/test_1c_exchange_mock.rb

# Stage 3: Integration —Ç–µ—Å—Ç—ã (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞ –ë–î)
if [[ -n "$DATABASE_URL" ]]; then
  ruby tests/integration/test_1c_exchange_api.rb
fi
```

### Production –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```bash
# –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
export TEST_BASE_URL="https://rozarioflowers.ru"
ruby tests/utils/test_1c_exchange_mock.rb
```

## üîß –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π
```ruby
# –í —Ç–µ—Å—Ç–∞—Ö –≤–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ UTF-8
response.body.force_encoding('UTF-8').valid_encoding?
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å XML
```ruby
# –ü–∞—Ä—Å–∏–Ω–≥ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º–∏ –æ—à–∏–±–∫–∞–º–∏
doc = Nokogiri::XML(xml_string) do |config|
  config.strict
end
puts doc.errors if doc.errors.any?
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î
```ruby
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ë–î
def database_available?
  ActiveRecord::Base.connection.active?
rescue => e
  puts "Database error: #{e.message}"
  false
end
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤

| –¢–∏–ø —Ç–µ—Å—Ç–∞ | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è | –¶–µ–ª—å |
|-----------|-------------------|------|
| Unit —Ç–µ—Å—Ç—ã | 5 —Å–µ–∫—É–Ω–¥ | –ë—ã—Å—Ç—Ä–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å |
| Mock —Ç–µ—Å—Ç—ã | 10 —Å–µ–∫—É–Ω–¥ | HTTP –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ |
| Integration —Ç–µ—Å—Ç—ã | 30 —Å–µ–∫—É–Ω–¥ | –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ |

### –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ XML
```ruby
# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è XML –¥–ª—è 100 –∑–∞–∫–∞–∑–æ–≤ –¥–æ–ª–∂–Ω–∞ –∑–∞–Ω–∏–º–∞—Ç—å < 5 —Å–µ–∫—É–Ω–¥
def test_xml_generation_performance
  start_time = Time.now
  xml = generate_test_xml(100_orders, order_products)
  generation_time = Time.now - start_time
  
  assert generation_time < 5.0, "Too slow: #{generation_time}s"
end
```

## üö® –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

**–ü—Ä–æ–±–ª–µ–º–∞**: XML —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏  
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥–∏—Ä–æ–≤–∫—É –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTML entities

**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–µ–¥–ª–µ–Ω–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è XML  
**–†–µ—à–µ–Ω–∏–µ**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å SQL –∑–∞–ø—Ä–æ—Å—ã, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å batch processing

**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–µ—Å—Ç–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –≤ production  
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å ENV['TESTER_NAME'] —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–∞—Ç  
**–†–µ—à–µ–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç, –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å nil –∑–Ω–∞—á–µ–Ω–∏—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```ruby
# –î–æ–±–∞–≤–∏—Ç—å –≤ —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏
puts "Generated XML: #{xml[0..500]}..." if ENV['DEBUG_XML']
puts "Order data: #{order.inspect}" if ENV['DEBUG_ORDERS']
```

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- **CommerceML 2.03**: [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ñ–æ—Ä–º–∞—Ç–∞](https://v8.1c.ru/solutions/1c-erp-integration/)
- **Nokogiri XML**: [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Å XML](https://nokogiri.org/)
- **WebMock**: [–ú–æ–∫–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP –∑–∞–ø—Ä–æ—Å–æ–≤](https://github.com/bblimke/webmock)

## ü§ù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤

1. **Unit —Ç–µ—Å—Ç**: –¥–æ–±–∞–≤–∏—Ç—å –≤ `test_1c_exchange_unit.rb`
2. **Integration —Ç–µ—Å—Ç**: –¥–æ–±–∞–≤–∏—Ç—å –≤ `test_1c_exchange_api.rb`  
3. **Mock —Ç–µ—Å—Ç**: –¥–æ–±–∞–≤–∏—Ç—å –≤ `test_1c_exchange_mock.rb`

### –ö–æ–¥ —Å—Ç–∞–π–ª
```ruby
# –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞ —Ç–µ—Å—Ç–æ–≤
def test_xml_generation_with_cyrillic_characters
  # —Ç–µ—Å—Ç —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π
end

# –ì—Ä—É–ø–ø–∏—Ä—É–µ–º assert'—ã –ª–æ–≥–∏—á–µ—Å–∫–∏
assert_equal expected, actual, "Descriptive error message"
assert response.valid?, "Response should be valid"
```

### Pull Request —á–µ–∫-–ª–∏—Å—Ç

- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] Mock —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç  
- [ ] Integration —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å –ë–î)
- [ ] –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–µ—Å–ª–∏ –∞–∫—Ç—É–∞–ª—å–Ω–æ)

---

**–ê–≤—Ç–æ—Ä**: –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è 1C Exchange API  
**–í–µ—Ä—Å–∏—è**: 1.0  
**–î–∞—Ç–∞**: 2024
