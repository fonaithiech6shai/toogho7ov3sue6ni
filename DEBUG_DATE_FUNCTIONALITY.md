# Отладка функциональности автозаполнения даты

## Шаги для проверки:

### 1. Проверьте API endpoint

Откройте в браузере: `/admin/smiles/test_date_api`

- Введите номер заказа (8-значное число)
- Нажмите "Получить дату заказа"
- Проверьте, что API возвращает отформатированную дату

### 2. Проверьте форму создания/редактирования smile

Откройте: `/admin/smiles/new` или `/admin/smiles/edit/<id>`

- В поле "Номер заказа" введите 8-значный номер
- Уберите фокус с поля (Tab или клик в другое место)
- **Поле "Дата" должно автоматически заполниться**

### 3. Проверьте консоль браузера

Откройте Developer Tools (F12) → Console:

- Должны быть логи вида:
  ```
  Поле date найдено: <input...>
  Номер заказа для заполнения даты: 12345678
  Автозаполнение даты для заказа: 12345678
  Получение даты для заказа: 12345678
  Ответ API даты: {success: true, formatted_date: "..."}
  Поле date автоматически заполнено: 23 сентября 2033 года
  ```

### 4. Проверьте серверные логи

В логах приложения должны быть записи:
```
DEBUG API: Получен запрос на дату заказа: 12345678
DEBUG API: Заказ найден, d2_date: "15/09/2023"
DEBUG API: Отформатированная дата: "15 сентября 2023 года"
```

## Возможные проблемы:

1. **API endpoint не работает** - проверьте маршруты
2. **JavaScript не выполняется** - проверьте консоль на ошибки
3. **Поле date не найдено** - проверьте ID поля в HTML
4. **Заказ не найден** - убедитесь, что заказ с таким номером существует
5. **d2_date пустое** - у заказа может не быть даты доставки

## Тестовые данные:

Используйте существующие номера заказов из базы данных.
Проверьте через SQL:
```sql
SELECT eight_digit_id, d2_date FROM orders WHERE d2_date IS NOT NULL LIMIT 5;
```
